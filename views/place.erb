
<script src="//ajax.googleapis.com/ajax/libs/jquery/2.1.1/jquery.min.js"></script>
<script src="http://maps.google.com/maps/api/js?sensor=false" type="text/javascript"></script>

<div id="map-container"></div>

<script type="text/javascript">

var map;

$('document').ready(function(){
  google.maps.event.addDomListener(window, 'load', initialize);
});

function initialize()
{
  if (navigator.geolocation) {
    navigator.geolocation.getCurrentPosition(function(position) {
      var latlng = new google.maps.LatLng(position.coords.latitude, position.coords.longitude);


      map = new google.maps.Map(
        document.getElementById("map-container"),{
          zoom : 13,
          center : latlng,
          mapTypeId : google.maps.MapTypeId.ROADMAP
      });

      var marker = new google.maps.Marker({
        position: latlng,
        map: map,
        title: '現在地'
      });


      map.data.loadGeoJson("/geo/");

      map.data.setStyle(function(feature) {
          var theaterName = feature.getProperty('name');
          return {
            icon: {url: "/img/icon.gif" },
            visible: true,
            clickable: true,
            title: theaterName
          };
      });



      map.data.addListener('addfeature', function(event) {
        var infowindow = new google.maps.InfoWindow();
        var myHTML = event.feature.getProperty("description");

        infowindow.setContent("<div style='width:150px; text-align: center;'>"+myHTML+"</div>");
        infowindow.setPosition(event.feature.getGeometry().get());
        infowindow.setOptions({pixelOffset: new google.maps.Size(0,-30)});
        infowindow.open(map);
		  });



    }, function (e) {

    });
  }


}


</script>
